0908 오늘의 삽질1

java.lang.IllegalStateException: Unable to find a @SpringBootConfiguration, you need to use @ContextConfiguration or @SpringBootTest(classes=...) with your test

스프링부트에서 maven 으로 빌드 시, 해당 오류 발생. 테스트 코드를 메인 프로그램과 같은 패키지 명 안에 있어야 하는 오류. Test어노테이션에 classes=메인프로그램.class 를 해주던지, 아니면 패키지명을 메인 프로그램 소스와 동일한 구성으로 변경해주어야 함.



0909 오늘의 삽질1.

검색어 : iptables 재부팅 초기화

sudo iptables -F (초기화)

sudo iptables -I INPUT 1 -p tcp --dport 9000 -j ACCEPT

sudo iptables -I INPUT 2 -p tcp --dport 8080 -j ACCEPT

sudo iptables -I INPUT 3 -p tcp --dport 80 -j ACCEPT

iptables 는 우분투 재부팅 시 초기화 된다. 

찾아본 바로는 iptable 과 ufw 를 함께 쓰면 충돌난다는 얘기가 있다. 

오늘 우분투 리부팅 후 젠킨스가 다시 실행이 안되서 원인을 계속 찾아봤는데, iptables 설정이 없어서 그런 것 같다. 

https://happist.com/573574/%EC%9A%B0%EB%B6%84%ED%88%AC-%EB%B0%A9%ED%99%94%EB%B2%BD-%EA%B0%95%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%9A%B0%EB%B6%84%ED%88%AC-iptables-%EC%84%A4%EC%A0%95%EB%B2%95-ddos-%EB%B0%A9%EC%96%B4



0910 

Spring boot starter 프로젝트에는 jsp 를 위한 모듈이 설치되어 있지 않기 때문에 다음과 같은 의존성을 추가해야만 한다.

```xml
		<dependency>
			<groupId>javax.servlet</groupId>
			<artifactId>jstl</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-jasper</artifactId>
    </dependency>
```

https://mindols.tistory.com/263 - jsp파일이 wizard에 없음.

https://offbyone.tistory.com/391 - jenkins 와 github 연동

https://kookyungmin.github.io/deployment/2018/08/23/tool_10/ - jenkins 와 maven, tomcat 연동



0923 오늘의 삽질1. maven 빌드에러

```
Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project JenkinsProject: Fatal error compiling: invalid target release: 11 -> [Help 1]
```

java version 이 낮은데, maven 버전은 11 -> java version 을 11로 올려주고, jenkins 에도 새로 바뀐 자바 경로를 설정해주었음.

vi /etc/profile - java path 설정한 곳.

tomcat-users.xml 에다가 tomcat 인증 정보 입력 등



0923 오늘의 삽질 2. Jenkins 가 안돌아가!!!!!!

https://sundries-in-myidea.tistory.com/102 - 프리티어 메모리 부족 현상 해결



0927 오늘의 삽질. tomcat manager!?

젠킨스 빌드에러가 떴음. manager/list를 찾지못한다는 에러였는데, 내가 tomcat-users.xml 에 role 태그를 써주지 않은 것을 발견하였음.

/etc/tomcat9/tomcat-users.xml

```xml
 <role rolename="manager-gui"/>
 <role rolename="manager-script"/>
 <role rolename="manager-status"/>
 <user username="jenkins" password="dhfpswl35" roles="manager-gui,manager-script,manager-status"/>
```



그리고, tomcat9-admin 을 새로 깔아주었다. 

시바왜안돼

https://luji.tistory.com/93